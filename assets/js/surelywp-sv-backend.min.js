"use strict";jQuery(document).ready((function(e){if(e(document).on("click",".req-close-icon, .req-field-label-top.close",(function(s){e(this).closest(".service-requirements-field").find(".req-open-icon").removeClass("hidden"),e(this).closest(".service-requirements-field").find(".req-close-icon").addClass("hidden"),e(this).closest(".service-requirements-field").find(".sv-requirements-options").slideUp(),e(this).closest(".service-requirements-field").find(".req-field-label-top").addClass("open").removeClass("close"),e(this).closest(".service-requirements-field").removeClass("open")})),e(document).on("click",".req-open-icon, .req-field-label-top.open",(function(s){e(this).closest(".service-requirements-field").find(".req-open-icon").addClass("hidden"),e(this).closest(".service-requirements-field").find(".req-close-icon").removeClass("hidden"),e(this).closest(".service-requirements-field").find(".sv-requirements-options").slideDown(),e(this).closest(".service-requirements-field").find(".req-field-label-top").addClass("close").removeClass("open"),e(this).closest(".service-requirements-field").addClass("open")})),e(document).on("click",".mil-close-icon, .mil-field-label-top.close",(function(s){e(this).closest(".service-milestones-field").find(".mil-open-icon").removeClass("hidden"),e(this).closest(".service-milestones-field").find(".mil-close-icon").addClass("hidden"),e(this).closest(".service-milestones-field").find(".sv-milestones-options").slideUp(),e(this).closest(".service-milestones-field").find(".mil-field-label-top").addClass("open").removeClass("close"),e(this).closest(".service-milestones-field").removeClass("open")})),e(document).on("click",".mil-open-icon, .mil-field-label-top.open",(function(s){e(this).closest(".service-milestones-field").find(".mil-open-icon").addClass("hidden"),e(this).closest(".service-milestones-field").find(".mil-close-icon").removeClass("hidden"),e(this).closest(".service-milestones-field").find(".sv-milestones-options").slideDown(),e(this).closest(".service-milestones-field").find(".mil-field-label-top").addClass("close").removeClass("open"),e(this).closest(".service-milestones-field").addClass("open")})),e("#product-service-block").length>0){var s=e("#product-service-block");s.remove(),e(".css-wzxb7d > div").eq(0).after(s)}if(e("#customer-services-list-block").length>0){var i=e("#customer-services-list-block");i.removeClass("hidden"),e(".css-1m2qrki").append(i)}function t(s,i=""){var t=e("#surelywp_sv_manage_product_service_nonce").val(),n=e("#sv-product-id").val(),r=e("#current-service-setting-id").val();e.ajax({url:sv_backend_ajax_object.ajax_url,dataType:"json",type:"POST",data:{action:"surelywp_sv_manage_product_service",nonce:t,product_id:n,is_service_enable:s,service_setting_id:i,current_service_setting_id:r},success:function(s){e("#current-service-setting-id").val(i),e(".css-uksis0").append('<div class="sv-product-updated" style="height: auto; opacity: 1;"><div class="components-snackbar-list__notice-container"><div class="components-snackbar" tabindex="0" role="button" aria-label="Dismiss this notice"><div class="components-snackbar__content">Product updated.</div></div></div></div>'),setTimeout((function(){e(".sv-product-updated").remove()}),2e3)}}).catch((e=>{console.error("Error:",e)}))}e(document).on("change","#surelywp-sv-is-enable-recurring-services",(function(s){e("#surelywp-sv-recurring-services-settings-options").toggle(),e("#surelywp-sv-number-of-allow-sv-per-order-option").toggle()})),e(document).on("change","#is-display-req-form-on-product-page",(function(s){e("#surelywp-sv-req-form-options").toggle()})),e(document).on("change","#milestones-revision-allowed",(function(){e(this).closest(".sv-milestones-options").find("#surelywp-sv-revision-number-options").toggle()})),e(document).on("click",".service-block-previous, .service-block-next",(function(s){var i=e(".service-block-previous, .service-block-next");i.attr("loading",!0),e("#customer-services-skeleton").removeClass("hidden"),e("#customer-services-list-table").addClass("hidden");var t,n=s.target.classList.value,r=e("#customer-services-pagination-data"),l=parseInt(r.data("current-page")),o=parseInt(r.data("total-pages")),d=parseInt(r.data("user-id"));t=n.includes("service-block-next")?l+1:l-1,e.ajax({url:sv_backend_ajax_object.ajax_url,dataType:"json",type:"POST",data:{action:"surelywp_sv_get_user_service_block_paginate",user_id:d,next_page:t,nonce:sv_backend_ajax_object.nonce},success:function(s){i.attr("loading",!1),e("#customer-services-skeleton").addClass("hidden"),e("#customer-services-list-table").removeClass("hidden"),s.success&&(e(".customer-services-admin-block").html(s.service_table),r.data("current-page",t),t===o?e(".service-block-next").attr("disabled",!0):1===t&&e(".service-block-next").attr("disabled",!1),1===t?e(".service-block-previous").attr("disabled",!0):e(".service-block-previous").attr("disabled",!1))}}).catch((e=>{console.error("Error:",e)}))})),e(document).on("scChange",(function(s){var i=s.target.classList.value;if(i.includes("surelywp-product-service-enable-switch"))s.target.checked?(e(".surelywp-services-selection-wrap").removeClass("hidden"),t(1,e("#surelywp-services-selection").val())):(e(".surelywp-services-selection-wrap").addClass("hidden"),t(0));else if(i.includes("surelywp-services-selection")){t(1,e("#surelywp-services-selection").val())}})),e(".surelywp-surecart-header").length&&e("#wpcontent").attr("style","padding-left: 0px !important"),e("#services-settings-form").removeClass("cursor-not-allow"),FilePond.registerPlugin(FilePondPluginFileEncode,FilePondPluginFileValidateSize,FilePondPluginImageExifOrientation,FilePondPluginImagePreview,FilePondPluginFileValidateType);const n=FilePond.create(document.querySelector(".delivery-now-filepond"),{acceptedFileTypes:sv_backend_ajax_object.file_types,allowFileEncode:!1,allowMultiple:!0,labelIdle:wp.i18n.__("Drag & Drop your files","surelywp-services")+' <span class="filepond--label-action">'+wp.i18n.__("or Browse","surelywp-services")+"</span>"});if(e(document).on("change","#is-enable-auto-order-complete",(function(){e("#auto-complete-option").toggle()})),e(document).on("change","#is-enable-allow-file-uploads",(function(){e("#file-type-option").toggle(),e("#add-mime-type-option").toggle(),e("#file-size-option").toggle()})),e(document).on("change","#recurring-base-on-options",(function(){let s=e(this).val();"subscription_cycle"==s?e("#custom-frequency-options").hide():"custom_frequency"==s&&e("#custom-frequency-options").show()})),e(document).on("change","#services-product-type",(function(){var s;"all"==(s=e(this).val())?(e("#specific-product-selection-div").hide(),e("#specific-product-collection-selection-div").hide()):"specific"==s?(e("#specific-product-collection-selection-div").hide(),e("#specific-product-selection-div").show()):"specific_collection"==s&&(e("#specific-product-collection-selection-div").show(),e("#specific-product-selection-div").hide())})),e(document).on("change",".req-field-type",(function(){var s=e(this).val();"textarea"===s?(e(this).closest(".service-requirements-field").find(".note").addClass("hidden"),e(this).closest(".service-requirements-field").find(".file-required-label").addClass("hidden-label"),e(this).closest(".service-requirements-field").find(".textarea-required-label").removeClass("hidden-label"),e(this).closest(".service-requirements-field").find(".is-enable-rich-text-editor-option").removeClass("hidden"),e(this).closest(".service-requirements-field").find(".dropdown-required-label").addClass("hidden-label"),e(this).closest(".service-requirements-field").find(".req-input-dropdown").addClass("hidden-label"),e(this).closest(".service-requirements-field").find(".dropdown-add-btn").addClass("hidden-label")):"text"===s?(e(this).closest(".service-requirements-field").find(".note").addClass("hidden"),e(this).closest(".service-requirements-field").find(".file-required-label").addClass("hidden-label"),e(this).closest(".service-requirements-field").find(".textarea-required-label").removeClass("hidden-label"),e(this).closest(".service-requirements-field").find(".is-enable-rich-text-editor-option").addClass("hidden"),e(this).closest(".service-requirements-field").find(".dropdown-required-label").addClass("hidden-label"),e(this).closest(".service-requirements-field").find(".req-input-dropdown").addClass("hidden-label"),e(this).closest(".service-requirements-field").find(".dropdown-add-btn").addClass("hidden-label")):"file"===s?(e(this).closest(".service-requirements-field").find(".note").removeClass("hidden"),e(this).closest(".service-requirements-field").find(".textarea-required-label").addClass("hidden-label"),e(this).closest(".service-requirements-field").find(".file-required-label").removeClass("hidden-label"),e(this).closest(".service-requirements-field").find(".is-enable-rich-text-editor-option").addClass("hidden"),e(this).closest(".service-requirements-field").find(".dropdown-required-label").addClass("hidden-label"),e(this).closest(".service-requirements-field").find(".req-input-dropdown").addClass("hidden-label"),e(this).closest(".service-requirements-field").find(".dropdown-add-btn").addClass("hidden-label")):"dropdown"===s&&(e(this).closest(".service-requirements-field").find(".note").addClass("hidden"),e(this).closest(".service-requirements-field").find(".textarea-required-label").addClass("hidden-label"),e(this).closest(".service-requirements-field").find(".file-required-label").addClass("hidden-label"),e(this).closest(".service-requirements-field").find(".is-enable-rich-text-editor-option").addClass("hidden"),e(this).closest(".service-requirements-field").find(".dropdown-required-label").removeClass("hidden-label"),e(this).closest(".service-requirements-field").find(".req-input-label-dropdown").removeClass("hidden-label"),e(this).closest(".service-requirements-field").find(".req-input-dropdown").removeClass("hidden-label"),e(this).closest(".service-requirements-field").find(".dropdown-add-btn").removeClass("hidden-label"))})),e(document).on("change","#surelywp-sv-settings-status",(function(){e(this).is(":checked")?e("#surelywp-sv-order-again-settings").show():e("#surelywp-sv-order-again-settings").hide()})),e(document).on("change","#ask-for-req",(function(){e(this).is(":checked")?e("#service-requirements-fields").show():e("#service-requirements-fields").hide()})),e(document).on("change","#ask-for-contract",(function(){e(this).is(":checked")?e("#service-contract-fields").show():e("#service-contract-fields").hide()})),e(".order-services-list-block").length>0){var r=e(".order-services-list-block");r.remove(),e(".css-1m2qrki").append(r)}if(e("#sv-add-mime-types").length){e("#sv-add-mime-types").select2({tags:!0,tokenSeparators:[","," "]}),e("#sv-add-mime-types").on("select2:selecting",(function(e){var s;(s=e.params.args.data.text,/^[a-zA-Z0-9]+\/[a-zA-Z0-9\.\-\+]+$/,/^[a-zA-Z0-9]+\/[a-zA-Z0-9\.\-\+]+$/.test(s))||e.preventDefault()}))}if(e("#sv-recipient-email").length){e("#sv-recipient-email").select2({tags:!0,tokenSeparators:[","," "]}),e("#sv-recipient-email").on("select2:selecting",(function(e){var s;(s=e.params.args.data.text,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s))||e.preventDefault()}))}function l(){var s=new Date(e(".delivery-time").text()),i=s.getFullYear()+"-"+("0"+(s.getMonth()+1)).slice(-2)+"-"+("0"+s.getDate()).slice(-2);e("#change-delivery-time").val(i)}if(jQuery(document).on("click",".service-requirements-dropdown-field-remove",(function(e){e.preventDefault();var s=jQuery(this).closest(".req-input-dropdown");if(s.length){var i=s.closest(".form-control");s.remove();var t=i.find("input.req-input-dropdown-options");t.each((function(e){var s=jQuery(this),i=s.attr("name")||"";if(i.match(/\[\d+\]$/)){var t=i.replace(/\[\d+\]$/,"");s.attr("name",t+"["+e+"]")}else s.attr("name",i+"["+e+"]")}));var n=Math.max(0,t.length-1),r=i.find("#dropdown-fields-count");r.length&&r.val(n)}})),e(document).on("click","#add-new-milestone-btn",(function(s){s.preventDefault();var i=e(".service-milestones-field:first").clone(),t=e("#surelywp-sv-service-setting-id").val(),n=Number(e("#milestone-fields-count").val())+1;i.find(".service-milestones-field-remove").removeClass("hidden"),i.find(".mil-field-label-top").html(""),i.find(".mil-open-icon").addClass("hidden"),i.find(".surelywp-sv-revision-number-options").addClass("hidden"),i.find(".mil-close-icon").removeClass("hidden"),i.find(".sv-milestones-options").css("display","block"),i.find('input[type="text"], input[type="number"], textarea').val(""),i.find('input[type="checkbox"]').prop("checked",!1);var r="surelywp_sv_settings_options[surelywp_sv_settings_options]["+t+"][milestones_fields]["+n+"]";i.find(".milestones-field-label").attr("name",r+"[milestones_field_label]"),i.find('input[name*="[milestones_require_approval]"]').attr("name",r+"[milestones_require_approval]"),i.find('input[name*="[milestones_revision_allowed]"]').attr("name",r+"[milestones_revision_allowed]"),i.find('input[name*="[milestone_revisions_number]"]').attr("name",r+"[milestone_revisions_number]"),i.find('input[name*="[milestone_delivery_days]"]').attr("name",r+"[milestone_delivery_days]"),e("#milestone-fields-count").val(n),e(".service-milestones-field:last").after(i)})),e(document).on("click","#add-new-req-btn",(function(s){s.preventDefault();var i=e(".service-requirements-field:first").clone(),t=e("#surelywp-sv-service-setting-id").val(),n=Number(e("#req-fields-count").val())+1,r="sv-requirement-"+n;i.find(".service-requirements-field-remove").removeClass("hidden"),i.find('input[type="text"], textarea').val(""),i.find(".req-field-label-top").html(""),i.find(".req-field-label-top").html(""),i.find(".req-open-icon").addClass("hidden"),i.find(".req-close-icon").removeClass("hidden"),i.find(".sv-requirements-options").css("display","block"),i.find(".is-require-field").prop("checked",!0).trigger("change"),i.find(".is-enable-rich-text-editor-option").addClass("hidden");var l="surelywp_sv_settings_options[surelywp_sv_settings_options]["+t+"][req_fields]["+n+"]";i.find(".req-field-label").attr("name",l+"[req_field_label]"),i.find(".req-field-type").attr("name",l+"[req_field_type]"),i.find(".is-require-field").attr("name",l+"[is_required_field]"),i.find(".req-input-dropdown-options").attr("name",l+"[req_field_dropdown_options]"),i.find(".req-title").attr("name",l+"[req_title]"),i.find(".req-desc").attr("name",l+"[req_desc]"),i.find(".is-enable-rich-text-editor").attr("name",l+"[is_enable_rich_text_editor]"),i.find(".req-input-dropdown").remove();var o=e('<div class="req-input-dropdown"><input type="text" class="req-input-dropdown-options widefat" name="'+l+'[req_field_dropdown_options][0]" value=""><div class="field-actions"><div class="dropdown-field-drag-handle"><img src="'+sv_backend_ajax_object.image_path+'/drag-icon.svg" alt="drag"></div><div class="service-requirements-dropdown-field-remove"><img src="'+sv_backend_ajax_object.image_path+'remove-dropdown-Icon.svg" alt="close"></div></div></div>');i.find(".dropdown-add-btn").before(o),i.find("#dropdown-fields-count").val(0),e("#req-fields-count").val(n),e(".service-requirements-field:last").after(i),i.find(".wp-editor-wrap").remove(),function(s,i,t){var n=e("<textarea>",{id:i,class:"req-desc wp-editor-area",name:t+"[req_desc]",rows:"5"});s.find(".req-input-label-desc").after(n),s.find(".file-required-label").addClass("hidden-label"),s.find(".textarea-required-label").removeClass("hidden-label"),wp.editor.initialize(i,{tinymce:{toolbar1:"bold,italic,underline,|,bullist,numlist,|,link,|,undo,redo",toolbar2:"",content_style:'body, p, div { font-family: "Open Sans", sans-serif; color: #4c5866; }'},quicktags:{buttons:"strong,em,link,ul,ol,li,quote"}})}(i,r,l)})),e(document).on("click",".add-new-dropdown-btn",(function(s){s.preventDefault();var i=e(this),t=i.closest(".form-control");t.find(".req-input-dropdown").length||(t=i.parents().filter((function(){return e(this).find(".req-input-dropdown").length})).first()),t&&t.length||(t=i.closest("div"));var n,r=t.find(".req-input-dropdown").last();if(r.length)n=r.clone(!0,!0);else{var l=e(".req-input-dropdown").first();n=l.length?l.clone(!0,!0):e('<div class="req-input-dropdown"><input type="text" class="req-input-dropdown-options widefat" value=""><div class="field-actions"><div class="dropdown-field-drag-handle"></div><div class="service-requirements-dropdown-field-remove"></div></div></div>')}var o=e("#surelywp-sv-service-setting-id").val()||"",d=0;t.find("input[name]").each((function(){var s=(e(this).attr("name")||"").match(/\[req_fields\]\[(\d+)\]/);if(s)return d=parseInt(s[1],10),!1}));var a=-1;t.find("input.req-input-dropdown-options[name]").each((function(){var s=(e(this).attr("name")||"").match(/\[req_field_dropdown_options\]\[(\d+)\]/);if(s){var i=parseInt(s[1],10);isNaN(i)||(a=Math.max(a,i))}}));var c=a+1;n.find("input.req-input-dropdown-options").val("");var v="surelywp_sv_settings_options[surelywp_sv_settings_options]["+o+"][req_fields]["+d+"][req_field_dropdown_options]["+c+"]";n.find("input.req-input-dropdown-options").attr("name",v),n.find(".service-requirements-dropdown-field-remove").removeClass("hidden"),r.length?r.after(n):i.closest(".form-control").before(n)})),e(document).on("click",".service-requirements-field-remove",(function(){e(this).closest(".service-requirements-field").remove()})),e(document).on("click",".service-milestones-field-remove",(function(){e(this).closest(".service-milestones-field").remove()})),e(".service-requirements-fields").length&&jQuery(".service-requirements-fields .service-requirements-field:first .service-requirements-field-remove").addClass("hidden"),e("#service-requirements-fields").length&&e("#service-requirements-fields").sortable({handle:".field-drag-handle",containment:"#service-requirements-fields",cancel:".no-sort",cursor:"row-resize",scrollSensitivity:40,forcePlaceholderSize:!0,update:function(s,i){var t=e("#surelywp-sv-service-setting-id").val();e(".service-requirements-fields .service-requirements-field").each((function(s,i){e(".req-field-type",i).attr("name","surelywp_sv_settings_options[surelywp_sv_settings_options]["+t+"][req_fields]["+s+"][req_field_type]"),e(".is-require-field",i).attr("name","surelywp_sv_settings_options[surelywp_sv_settings_options]["+t+"][req_fields]["+s+"][is_required_field]"),e(".req-title",i).attr("name","surelywp_sv_settings_options[surelywp_sv_settings_options]["+t+"][req_fields]["+s+"][req_title]"),e(".req-desc",i).attr("name","surelywp_sv_settings_options[surelywp_sv_settings_options]["+t+"][req_fields]["+s+"][req_desc]"),0===s?e(".service-requirements-field-remove",i).addClass("hidden"):e(".service-requirements-field-remove",i).removeClass("hidden")}))}}),e("#service-milestones-fields").length&&e("#service-milestones-fields").sortable({handle:".field-drag-handle",containment:"#service-milestones-fields",cancel:".no-sort",cursor:"row-resize",scrollSensitivity:40,forcePlaceholderSize:!0,update:function(s,i){var t=e("#surelywp-sv-service-setting-id").val();e(".service-milestones-fields .service-milestones-field").each((function(s,i){e(".milestones-field-label",i).attr("name","surelywp_sv_settings_options[surelywp_sv_settings_options]["+t+"][milestones_fields]["+s+"][milestones_field_label]"),e('input[name*="[milestones_require_approval]"]',i).attr("name","surelywp_sv_settings_options[surelywp_sv_settings_options]["+t+"][milestones_fields]["+s+"][milestones_require_approval]"),e('input[name*="[milestones_revision_allowed]"]',i).attr("name","surelywp_sv_settings_options[surelywp_sv_settings_options]["+t+"][milestones_fields]["+s+"][milestones_revision_allowed]"),e('input[name*="[milestone_revisions_number]"]',i).attr("name","surelywp_sv_settings_options[surelywp_sv_settings_options]["+t+"][milestones_fields]["+s+"][milestone_revisions_number]"),e('input[name*="[milestone_delivery_days]"]',i).attr("name","surelywp_sv_settings_options[surelywp_sv_settings_options]["+t+"][milestones_fields]["+s+"][milestone_delivery_days]"),0===s?e(".service-milestones-field-remove",i).addClass("hidden"):e(".service-milestones-field-remove",i).removeClass("hidden")}))}}),jQuery(document).ready((function(e){e("#dropdown-fields-wrapper").sortable({handle:".dropdown-field-drag-handle",cancel:".no-sort",cursor:"row-resize",scrollSensitivity:40,forcePlaceholderSize:!0})})),e(document).on("click","#extend-delivery-button",(function(s){s.preventDefault(),e(".exdent-delivery-date").addClass("show-modal")})),e(document).on("click",".close-button",(function(s){e(this).closest(".surelywp-sv-modal").find(".modal").removeClass("show-modal"),l()})),e(document).on("click","#cancel-delivery-date-change",(function(s){s.preventDefault(),e(this).closest(".surelywp-sv-modal").find(".modal").removeClass("show-modal"),l()})),e(document).on("click","#confirm-change-delivery-date",(function(s){s.preventDefault(),e(".body").addClass("pointer-event-none"),e(".exdent-delivery-date .modal-top .loader").removeClass("hidden");var i=e("#change-delivery-time").val(),t=e("#surelywp-sv-service-id").val(),n=e("#surelywp_sv_delivery_change_nonce").val();e.ajax({url:sv_backend_ajax_object.ajax_url,dataType:"json",type:"POST",data:{action:"surelywp_sv_change_delivery_date",nonce:n,service_id:t,delivery_date:i},success:function(s){window.location.reload(),e(".exdent-delivery-date .modal-top .loader").addClass("hidden"),e(".delivery-date-change, body").removeClass("pointer-event-none")}}).catch((s=>{e(".exdent-delivery-date .modal-top .loader").addClass("hidden"),e("body").removeClass("pointer-event-none"),console.error("Error:",s)}))})),e(".service-delivery-panel").length){var o=1e3*e("#service-delivery-panel").data("delivery-date");if((new Date).getTime()<=o)var d=o,a=setInterval((function(){var s=(new Date).getTime(),i=d-s,t=Math.floor(i/864e5),n=Math.floor(i%864e5/36e5),r=Math.floor(i%36e5/6e4),l=Math.floor(i%6e4/1e3);n/10<=1&&(n=n.toString().padStart(2,"0")),r/10<=1&&(r=r.toString().padStart(2,"0")),l/10<=1&&(l=l.toString().padStart(2,"0")),t/10<=1&&(t=t.toString().padStart(2,"0")),e(".service-delivery-panel .timer .days .count").html(t),e(".service-delivery-panel .timer .hours .count").html(n),e(".service-delivery-panel .timer .minutes .count").html(r),e(".service-delivery-panel .timer .seconds .count").html(l),i<=0&&(clearInterval(a),e(".service-delivery-panel .timer .count").html("00"))}),1e3);else e(".service-delivery-panel .timer .count").html("00")}if(e(document).on("click","#delivery-now-button",(function(s){s.preventDefault(),e(".delivery-now").addClass("show-modal")})),e(document).on("click","#cancel-delivery-now",(function(s){e(this).closest(".surelywp-sv-modal").find(".modal").removeClass("show-modal"),e(".service-message-input").val(""),n.removeFiles()})),e(document).on("click","#confirm-delivery-now",(function(s){e(".sv-error").length>0&&e(".sv-error").remove(),e(".delivery-now.modal .modal-content").animate({scrollTop:0},"slow");var i=new FormData,t=e("#surelywp_sv_message_form_submit_nonce").val(),r=e("#surelywp-sv-service-id").val(),l=e("#message-receiver-id").val(),o=e("#is-final-delivery").attr("data-milestone"),d=e("#surelywp-sv-service-setting-id").val(),a=tinyMCE.get("service-message-input-delivery-now")?tinyMCE.get("service-message-input-delivery-now").getContent():e("#service-message-input-delivery-now").val();""===a&&(a=e("#service-message-input-delivery-now").val());var c=0;c=0!==parseInt(o)?1:0;var v=n.getFiles();if(e.each(v,(function(e,s){2==s.status?i.append("msg_attachment_file[]",s.file):n.removeFile(s.id)})),""!==a&&void 0!==a)e(".body").addClass("pointer-event-none"),e(".delivery-now .modal-top .loader").removeClass("hidden"),i.append("action","surelywp_sv_message_form_sumbit_callback"),i.append("service_id",r),i.append("receiver_id",l),i.append("is_final_delivery",1),i.append("is_milestone_delivery",o),i.append("is_milestone_delivery_flag",c),i.append("nonce",t),i.append("service_message",a),i.append("service_setting_id",d),e.ajax({url:sv_backend_ajax_object.ajax_url,type:"POST",dataType:"json",data:i,processData:!1,contentType:!1,success:function(s){if(e(".body").removeClass("pointer-event-none"),e(".delivery-now .modal-top .loader").addClass("hidden"),s.success){e(".delivery-now-wrap").after('<p class="sv-success">Successfully Delivered.</p>')}else e(".delivery-now-wrap").after('<p class="sv-error">'+s.message+"</p>");window.location.reload(),tinyMCE.get("service-message-input-delivery-now")&&tinyMCE.get("service-message-input-delivery-now").setContent(""),e("#service-message-input-delivery-now").val(""),setTimeout((function(){n.removeFiles()}),100)}});else{var p=wp.i18n.__("Please enter your message and try again.","surelywp-services");e(".delivery-now-wrap").after('<p class="sv-error">'+p+"</p>")}})),e(document).on("click","#service-action-btn",(function(s){var i=e("#surelywp-sv-service-status").val();["waiting_for_req","waiting_for_contract"].includes(i)?e(".service-start-action").removeClass("hidden"):e(".service-start-action").addClass("hidden"),"service_complete"===i?e(".service-complete-action").addClass("hidden"):e(".service-complete-action").removeClass("hidden"),"service_canceled"===i?(e(".service-canceled-action").addClass("hidden"),e(".service-delete-action").removeClass("hidden")):e(".service-canceled-action").removeClass("hidden")})),e(document).on("click",".sv-action-menu-item",(function(s){var i=e(this).val();"service_delete"!==i&&(e(".confirm-service-update").addClass("show-modal"),"service_complete"==i?(e(".confirm-service-complete").removeClass("hidden"),e(".confirm-service-cancel").addClass("hidden"),e(".confirm-service-start").addClass("hidden")):"service_canceled"==i?(e(".confirm-service-cancel").removeClass("hidden"),e(".confirm-service-complete").addClass("hidden"),e(".confirm-service-start").addClass("hidden")):"service_start"==i&&(e(".confirm-service-start").removeClass("hidden"),e(".confirm-service-cancel").addClass("hidden"),e(".confirm-service-complete").addClass("hidden")))})),e(document).on("click",".confirm-service-complete, .confirm-service-cancel, .confirm-service-start",(function(s){e(".confirm-service-update .modal-top .loader").removeClass("hidden")})),e(document).on("click","#cancel-service-update",(function(s){e(this).closest(".surelywp-sv-modal").find(".modal").removeClass("show-modal")})),e(document).on("scHide",(function(s){if(s.preventDefault(),"work-start-note"===s.target.classList[0]){var i=window.location.hostname,t=e("#surelywp-sv-service-id").val();setCookie("is_close_work_start_note_"+t,!0,365,"/",i,!0)}})),e(".surelywp-sv-serview-view.admin").length){var c=e("#surelywp-sv-service-id").val();if(c)getCookie("is_close_work_start_note_"+c)&&e(".surelywp-sv-serview-view.admin .note").hide()}e(".surelywp-sv-serview-view.admin").length&&e("body").addClass("surelywp-service-admin-view"),e(document).on("click","#sv-remove-associate-service",(function(s){s.preventDefault();var i=e(this).attr("href");e(".associative-service-delete").addClass("show-modal"),e("#confirm-as-service-delete").attr("href",i)})),e(document).on("click",".close-modal-button",(function(s){e(this).closest(".modal").removeClass("show-modal")})),e(document).on("click",".surelywp-sv-delete-service",(function(s){s.preventDefault();var i=e(this).attr("href");e("#confirm-service-delete").attr("href",i),e(".confirm-service-delete.modal").addClass("show-modal")})),e(document).on("click","#confirm-service-delete",(function(s){e(this).closest(".modal").find(".loader").removeClass("hidden")}));var v="sv_active_tab_id_"+e("#surelywp-sv-service-setting-id").val(),p=localStorage.getItem(v);p||(p="sv-products-tab"),setTimeout((function(){e("#"+p).trigger("click")}),100),e(document).on("click",".services-settings-tabs .surelywp-btn",(function(s){e(this).addClass("active").closest(".services-settings-tabs").find(".surelywp-btn").not(this).removeClass("active");let i=e(this).attr("id");var t=e("#surelywp-sv-service-setting-id").val();switch(localStorage.setItem("sv_active_tab_id_"+t,i),e(".tab-settings").addClass("hidden"),i){case"sv-general-tab":e(".sv-general-settings").removeClass("hidden");break;case"sv-products-tab":e(".sv-products-settings").removeClass("hidden");break;case"sv-rules-tab":e(".sv-rules-settings").removeClass("hidden");break;case"sv-contract-tab":e(".sv-contract-settings").removeClass("hidden");break;case"sv-requirements-tab":e(".sv-requirements-settings").removeClass("hidden");break;case"sv-milestones-tab":e(".sv-milestones-settings").removeClass("hidden")}})),FilePond.registerPlugin(FilePondPluginFileValidateSize,FilePondPluginFileValidateType);const u=FilePond.create(document.querySelector(".messages-filepond-sv-import-export"),{acceptedFileTypes:sv_backend_ajax_object.file_types_ie,allowFileEncode:!1,allowMultiple:!0,labelIdle:wp.i18n.__("Click to upload","surelywp-catalog-mode")+' <span class="filepond--label-action">'+wp.i18n.__("or","surelywp-catalog-mode")+"</span>"+wp.i18n.__(" drag and drop","surelywp-catalog-mode")+' <span class="filepond--label-action">'+wp.i18n.__(" Only JSON File is allowed","surelywp-services")+"</span>"});e("#import-settings-form").on("submit",(function(s){s.preventDefault();let i=new FormData(this);if(u.getFiles().length>0){let e=u.getFiles()[0];2===e.status&&i.append("import_sv_file",e.file)}i.append("action","surelywp_sv_import_settings"),e.ajax({url:ajaxurl,type:"POST",data:i,processData:!1,contentType:!1,success:function(s){0==s.success?(e("#surelywp_services_panel_surelywp_import_export").prepend('<div class="notice notice-error is-dismissible surelywp_sv_ie_settings_notice"><p>'+s.data.message+"</p></div>"),u.removeFiles()):(e("#surelywp_services_panel_surelywp_import_export").prepend('<div class="notice notice-success is-dismissible surelywp_sv_ie_settings_notice"><p>'+wp.i18n.__("All Settings Of Services Plugin Imported Successfully.","surelywp-services")+"</p></div>"),u.removeFiles()),setTimeout((function(){e(".surelywp_sv_ie_settings_notice").fadeOut(400,(function(){e(this).remove()}))}),5e3)},error:function(s){e("#surelywp_services_panel_surelywp_import_export").prepend('<div class="notice notice-error is-dismissible"><p>'+s.responseText+"</p></div>"),u.removeFiles()}})}))}));